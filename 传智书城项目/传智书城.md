Web 开发的基础知识  奠定基础

互联网早已融入了社会生活的各个领域

在大量网民的推动下，中国的网上购物迅速发展，网上购物具有价格透明，足不出户就能货比三家等优点 那么 网络平台是如何实现呢

掌握通过E-R 图设计数据表 

了解传智书城的项目需求和功能结构

熟悉搭建项目的环境



项目的功能结构
数据库设计
项目环境的搭建

# 项目设计



# 项目概述

近年来，随着Internet的迅速崛起，互联网已成为收集信息的最佳渠道并逐步进入传统的流通领域。于是电子商务开始流行起来，越来越多的商家在网上建起在线商店，向消费者展示出一种新颖的购物理念。网上购物系统作为B2B、B2C（Business to Customer，即企业对消费者），C2C（Customer to Customer，即消费者对消费者)电子商务的前端商务平台，在其商务活动全过程中起着举足轻重的作用。在传智书城项目中主要讲解的是如何建设B2C的网上购物系统。

传智书城项目分为前台和后台两个部分，前台部分功能结构如下图所示。![1567845137595](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845137595.png)

用户操作 

用户注册 用户登录 用户信息修改 图书购买流程 订单查询

图书浏览

按类别浏览图书 按图书名称搜索图书 本周热卖 图书公告栏 首页轮播图

后台部分功能结构如下图所示。![1567845264271](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845264271.png)

商品管理  

添加商品 编辑商品 删除商品 查询商品 

销售榜单

下载销售数据

公告管理

添加公告 编辑公告  删除公告 查询公告 

订单管理

删除订单 查询订单

传智书城项目由多个页面组成，接下来将展示几个核心的页面。![1567845602622](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845602622.png)

## 需求分析

## 功能结构

## 项目预览



# 数据库设计

在设计数据库之前，首先需要明确在传智书城项目中都有哪些实体对象。根据实体对象间的关系来设计数据库。接下来介绍一种能描述实体对象关系的模型—E-R图。E-R图也称实体-联系图(Entity Relationship Diagram)，它能够直观的表示实体类型和属性之间的关联关系。

## E-R图设计

用户实体（user）的E-R图。![1567845761297](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845761297.png)

商品实体（products）的E-R图。![1567845780733](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845780733.png)

商品实体（products）的E-R图。![1567845847774](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845847774.png)

订单实体（orders）的E-R图。![1567845863931](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845863931.png)

订单项（orderitem）的E-R图。![1567845883682](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845883682.png)

公告栏实体（notice）的E-R图。![1567845905486](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845905486.png)

## 数据表结构

了解了实体类的E-R图结构后。接下来，将根据E-R图来设计数据表。在教材中，只提供数据表的表结构，读者可根据表结构自行编写SQL创建表，也可以执行配套的项目源码中的SQL语句创建表。

user表，该表用于保存传智书城系统前台以及后台用户的信息。![1567845944661](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567845944661.png)

products表，该表用于保存传智书城系统前台以及后台商品的信息。![1567846012631](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846012631.png)

orders表，该表用于保存传智书城系统前台以及后台订单的信息。![1567846028585](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846028585.png)

orderitem表，该表用于保存传智书城系统前台以及后台订单的条目信息。![1567846044329](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846044329.png)

notice表，该表用于保存传智书城系统前台以及后台公告栏的信息。![1567846061275](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846061275.png)

# 项目环境搭建

在开发功能模块之前，应该先进行项目环境及项目框架的搭建等工作。具体步骤如下：
确定项目开发环境
创建数据库表
创建项目，引入JAR包
配置c3p0-config.xml
编写filter过滤器
编写工具类DataSourceUtils

​        本章主要针对传智书城项目的前期准备工作进行了讲解，首先介绍了项目需求、功能结构，并给出了部分项目预览页面，使读者对传智书城项目有个大体的了解，然后讲解书城项目中的E-R图以及相关数据表结构的设计，最后，针对项目的环境搭建，进行了详细的讲解。通过本章的学习，读者可以了解传智书城项目的需求、功能结构及其数据库和数据表是如何设计的，并可以搭建项目的基础环境。

# 传智书城前台程序设计

掌握用户注册和登录模块
掌握购物车模块的开发
掌握图书信息查询模块的开发

## 用户注册和登录模块

### 实现用户注册功能

用户注册是用户参与网站活动最直接的桥梁。通过用户注册可以有效地采集用户信息，并将合法的用户信息保存到指定的数据表中。成功注册并激活的用户登录后，可以使用网站的更多功能，例如购物车、提交和支付订单、查看个人账户等等。接下来本节将针对用户注册和登录模块进行详细的讲解。

【任务目标】
在传智书城网站上，用户只有注册账号并登录后才可以购买图书，那么首次进入网站的用户就需要先注册账号。
【实现步骤】
编写注册页面
创建Servlet
编写Service层方法
创建邮件工具类

### 实现用户登录功能

【任务目标】
用户注册并成功激活之后，该用户便可以在传智书城前台网站进行登录操作。
【实现步骤】
编写登录页面
创建Servlet
编写Service层方法
创建DAO

## 购物车模块

在电子商务网站中购物车模块是必不可少的，也是最重要的模块之一。本节中将学习如何实现传智书城项目的购物车模块。在开发购物车模块之前，首先应该熟悉该模块实现的功能以及整个功能模块的处理流程。下面通过一幅图来展示购物车模块实现的所有功能，具体如下图所示。![1567846554916](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846554916.png)

购物车模块包括管理购物车中的商品和生成订单信息的功能，下面通过一幅图来描述购物车的功能流程，具体如下图所示。

![1567846582456](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567846582456.png)

【任务目标】
通过所学知识和购物车功能及流程的描述，实现在购物车中添加商品和删除购物车中指定商品的功能。
【实现步骤】
向购物车中添加商品
删除购物车中指定商品

### 实现购物车的基本功能

【任务目标】
根据购物车中的商品名称和数量生成了订单，并可以填写收货人姓名、联系电话和收获地址，本任务将实现提交订单的功能。
【实现步骤】
创建订单页面
创建Servlet

### 实现订单的相关功能



## 图书信息查询模板

图书根据其题材和内容的不同，可以分为不同的类型，单击商品分类导航栏的指定分类，可以展示该分类下的所有图书，而搜索功能用于根据书名模糊查询图书，满足用户快速搜寻心仪图书的需要。接下来本节将对商品分类导航栏和搜索模块的实现进行详细地讲解。【任务目标】
根据商品类型的不同，将图书分为文学类、生活类、计算机类等。单击导航栏上不同的类型，显示该类型下所有的图书，当单击“全部商品目录”时，查询的是所有的图书。
【实现步骤】
编写页面功能代码
创建Servlet

### 实现商品分类导航栏

### 实现图书搜索功能

【任务目标】
由于传智书城的图书数量众多，并不方便用户快速查找和购买心仪的图书，因此提供了图书搜索功能。
【实现步骤】
实现页面代码
创建Servlet

### 实现公告板和本周热卖功能

【任务目标】
公告板和本周热卖模块位于首页广告轮播图下面，在访问网站首页时进行动态显示。公告板用于发布与网站相关的信息，本周热卖用于展示本周内销售数量最多的两本图书。
【实现步骤】
创建Servlet
编写dao层代码

### 本章小结

​        本章主要针对传智书城项目前台程序设计的主要模块，包括用户注册和登录模块、购物车模块和图书信息查询模块进行详细地讲解。这些模块是一个成熟电子商务网站前台系统的核心功能，运用非常普遍，读者应该多思考这些功能模块的业务逻辑多敲代码，以达到熟练掌握的程度。

# 传智书城后台程序设计

掌握商品管理模块功能的实现
销售榜单模块
掌握订单管理模块功能的实现

了解后台的主要功能

## 后台管理系统概述

后台管理系统的页面框架是通过<frameset>标签来组织的，其页面构成如下图所示。![1567847104363](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567847104363.png)

本书中，为传智书城前台网站和后台管理系统提供了完整的源码，其中后台管理系统源码的目录结构如下图所示。![1567847121961](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567847121961.png)



## 商品管理模块

传智书城中的商品管理是指对图书信息的管理，比如图书名、图书价格、图书分类等，通过后台系统中的商品管理模块可以实现图书信息在前台网站上的动态展示。后台商品管理模块的功能结构如下图所示。![1567847143129](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567847143129.png)

### 商品管理模块简介

### 实现查询商品列表功能

【任务目标】
根据商品管理模块简介，实现查询所有商品和用户根据条件自定义查询商品的功能。
【实现步骤】
查询所有商品信息
按条件查询

### 实现添加商品信息功能

【任务目标】
当公司采购的一批新商品入库时，后台管理人员需要录入这些新商品的信息，并保存到数据库中，以便这些新商品可以在前台网站进行展示和出售，这时就需要进行添加商品信息操作。
【实现步骤】
创建Servlet
编写Service层方法
编写DAO层方法

### 实现编辑商品信息功能

【任务目标】
单击商品列表中一个商品后面的编辑图标“ ”后，页面会跳转到该商品的编辑页面，本页面中会显示出商品的具体信息，修改其中的信息后，单击“保存”按钮，商品管理首页将显示修改后的商品信息。
【实现步骤】
创建Servlet
编写Service层方法
编写DAO层方法

### 实现删除商品信息功能

【任务目标】
 通过单击列表页面中商品后面的删除图标“ ”，实现对应商品的删除功能。
【实现步骤】
创建Servlet
编写Service层方法
编写DAO层方法

## 销售榜单模块

### 实现销售榜单下载功能

【任务目标】
为了便于管理人员查看和保留销售历史数据，传智书城后台管理系统中提供了销售榜单模块，该模块主要实现的功能是下载历史销售数据，将已销售商品的信息，按照商品销量从高到低排序后导出到扩展名为“.csv”的文件中。
【实现步骤】
创建下载页面
创建Servlet
编写Service层代码
编写DAO层的代码
运行项目，查看结果

## 订单管理模块

传智书城中的订单管理是对订单信息，比如订单编号、订单收件人、订单总价和订单所属用户等内容的管理，这些订单信息是由传智书城网站前台用户提交订单时生成的。后台订单管理模块的功能结构如下图所示。![1567847300217](C:\Users\x1c\AppData\Roaming\Typora\typora-user-images\1567847300217.png)

### 实现查询订单列表功能

【任务目标】
查询订单列表功能可以分为查询所有订单和用户根据条件自定义查询订单这两种情况，本小节中，将完成这两种查询功能的实现。
【实现步骤】
查询所有订单信息
按条件查询

### 实现查看订单详情功能

【任务目标】
进入订单管理后，在订单列表任意一行中单击“ ”图标链接，进入订单详情页面。
【实现步骤】
创建Servlet
编写Service层方法
编写DAO层方法
创建显示页面

### 实现删除订单功能

【任务目标】
系统后台管理员可以通过订单管理模块对已经支付的订单进行删除操作。在订单管理首页面上，订单列表中每条数据最后一栏中都有删除图标“ ”。
【实现步骤】
编辑页面代码
创建Servlet
编写Service层方法
编写DAO方法

## 本章小结

​        本章主要针对传智书城项目的后台管理系统进行了详细的讲解。通过本章的学习，读者可以了解后台系统是如何与前台网站进行联系并管理前台网站的，还可以掌握后台管理系统中商品管理、订单管理等功能模块的实现。

## 图书信息查询模块